# 음성 메모 앱 (Voice Memo App)

이 앱은 음성을 텍스트로 변환하고 Supabase에 저장하는 Streamlit 기반 웹 애플리케이션입니다.

## 기능

- 음성 녹음 및 텍스트 변환
- 변환된 텍스트 편집
- Supabase 데이터베이스에 메모 저장
- 저장된 메모 목록 조회

## 설치 방법

1. 저장소 클론 또는 다운로드
2. 필요한 패키지 설치:
   ```
   pip install -r requirements.txt
   ```
   
   > **주의**: Supabase 라이브러리 버전 2.x에서는 `proxy` 매개변수 관련 오류가 발생할 수 있습니다. 이 경우 다음 명령어로 버전 1.0.3을 설치하세요:
   > ```
   > pip install supabase==1.0.3
   > ```

3. Supabase 설정:
   - Supabase 계정 생성 및 새 프로젝트 생성 (https://supabase.com)
   - `voice_memos` 테이블 생성 (필드: id, content, created_at)
   - `.env` 파일에 Supabase URL과 API 키 설정:
     ```
     SUPABASE_URL=your_supabase_url
     SUPABASE_KEY=your_supabase_key
     ```

## Supabase 테이블 설정

Supabase 대시보드에서 다음과 같이 테이블을 생성하세요:

테이블 이름: `voice_memos`
필드:
- `id`: int8, primary key, auto-increment
- `content`: text, not null
- `created_at`: timestamptz, not null

SQL 명령어:
```sql
CREATE TABLE voice_memos (
  id BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  content TEXT NOT NULL,
  created_at TIMESTAMPTZ NOT NULL
);
```

## 실행 방법

```
streamlit run voicememoapp.py
```

## 사용 방법

1. "녹음 시작" 버튼을 클릭합니다.
2. 녹음된 오디오 파일(.wav)을 업로드합니다.
3. 변환된 텍스트를 확인하고 필요시 편집합니다.
4. "텍스트 저장" 버튼을 클릭하여 Supabase에 저장합니다.
5. 사이드바에서 저장된 메모 목록을 확인할 수 있습니다.

## 문제 해결

### Supabase 연결 오류
오류 메시지: `TypeError: Client.__init__() got an unexpected keyword argument 'proxy'`

이 오류는 Supabase 라이브러리 버전 2.x에서 발생할 수 있습니다. 해결 방법:
1. Supabase 라이브러리를 버전 1.0.3으로 다운그레이드:
   ```
   pip install supabase==1.0.3
   ```
2. 앱을 다시 실행합니다.

## 참고 사항

- Streamlit은 직접 마이크 접근이 제한적이므로, 녹음된 오디오 파일을 업로드하는 방식으로 구현되었습니다.
- 음성 인식은 Google Speech Recognition API를 사용합니다 (한국어 지원).
- Supabase 연결 정보는 반드시 `.env` 파일에 설정해야 합니다. 